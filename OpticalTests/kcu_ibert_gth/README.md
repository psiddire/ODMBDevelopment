# IBERT firmwares for KCU105
IBERT test in VHDL for KCU105, with different configurations using some shared code.

## Projects

### project_[N]quads
Project with all N quads configured to use the reference clock connect to that quad.
- Top file: `source/kcu_ibert_gth.vhd` 
  - Shared top file for N quads config
  - Project file for 4 quads is included
  - Projects for other N quads shall be regenerated by the tcl script
- DAQ_SPY_SEL controlled by vio, but should always be 0
- SYSMON for MGT V/I monitoring
  - Need to run tcl commands to setup after loading firmware
  - Use VIO output to select the mux for VAUX2 values to read

## Generator script
- `scripts/project_generator.tcl`: used to generate projects for different configs with setup on top
- `scripts/sysmon_setup.tcl`: used to enable the SYSMON module for proper reading

## To re-make the testbench project, run the below commands. The testbench is targeted for the KCU105 board.
~~~~bash
cd scripts # this step is needed
emacs -nw project_generator.tcl # edit the configure variables at the top
vivado -nojournal -nolog -mode batch -source project_generator.tcl
~~~~
